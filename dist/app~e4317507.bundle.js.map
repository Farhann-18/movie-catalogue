{"version":3,"file":"app~e4317507.bundle.js","mappings":"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","sources":["webpack://movie-catalogue/./src/scripts/routes/routes.js","webpack://movie-catalogue/./src/scripts/routes/url-parser.js","webpack://movie-catalogue/./src/scripts/utils/drawer-initiator.js","webpack://movie-catalogue/./src/scripts/utils/like-button-initiator.js","webpack://movie-catalogue/./src/scripts/utils/webWorkerRegister.js","webpack://movie-catalogue/./src/scripts/utils/notification-helper.js","webpack://movie-catalogue/./src/scripts/utils/websocket-initiator.js"],"sourcesContent":["/* eslint-disable quotes */\r\nimport NowPlaying from \"../views/pages/now-playing\";\r\nimport Upcoming from \"../views/pages/upcoming\";\r\nimport Detail from \"../views/pages/detail\";\r\nimport Like from \"../views/pages/like\";\r\nimport Homepage from \"../views/pages/homepage\";\r\nimport List from \"../views/pages/list\";\r\nimport Trending from \"../views/pages/trending\";\r\nimport Populer from \"../views/pages/populer\";\r\nimport Latest from \"../views/pages/latest\";\r\n\r\nconst routes = {\r\n  \"/\": Homepage, // default page\r\n  \"/movies\": List,\r\n  \"/nowplaying-movies\": NowPlaying,\r\n  \"/upcoming-movies\": Upcoming,\r\n  \"/detail/:id\": Detail,\r\n  \"/trending-movies\": Trending,\r\n  \"/populer-movies\": Populer,\r\n  \"/latest-movies\": Latest,\r\n  \"/bookmark\": Like,\r\n};\r\n\r\nexport default routes;\r\n","const UrlParser = {\n  parseActiveUrlWithCombiner() {\n    const url = window.location.hash.slice(1).toLowerCase();\n    const splitedUrl = this._urlSplitter(url);\n    return this._urlCombiner(splitedUrl);\n  },\n\n  parseActiveUrlWithoutCombiner() {\n    const url = window.location.hash.slice(1).toLowerCase();\n    return this._urlSplitter(url);\n  },\n\n  _urlSplitter(url) {\n    const urlsSplits = url.split('/');\n    return {\n      resource: urlsSplits[1] || null,\n      id: urlsSplits[2] || null,\n      verb: urlsSplits[3] || null,\n    };\n  },\n\n  _urlCombiner(splitedUrl) {\n    return (splitedUrl.resource ? `/${splitedUrl.resource}` : '/')\n    + (splitedUrl.id ? '/:id' : '')\n    + (splitedUrl.verb ? `/${splitedUrl.verb}` : '');\n  },\n};\n\nexport default UrlParser;\n","const DrawerInitiator = {\n  init({ button, drawer, content }) {\n    button.addEventListener('click', (event) => {\n      this._toggleDrawer(event, drawer);\n    });\n\n    content.addEventListener('click', (event) => {\n      this._closeDrawer(event, drawer);\n    });\n  },\n\n  _toggleDrawer(event, drawer) {\n    event.stopPropagation();\n    drawer.classList.toggle('open');\n  },\n\n  _closeDrawer(event, drawer) {\n    event.stopPropagation();\n    drawer.classList.remove('open');\n  },\n};\n\nexport default DrawerInitiator;\n","/* eslint-disable quotes */\r\n/* eslint-disable no-undef */\r\n/* eslint-disable no-empty-function */\r\n/* eslint-disable no-unused-vars */\r\nimport FavoriteMovieIdb from \"../data/favorite-movie-idb\";\r\nimport {\r\n  createLikeButtonTemplate,\r\n  createLikedButtonTemplate,\r\n} from \"../views/templates/template-creator\";\r\n\r\nconst LikeButtonInitiator = {\r\n  async init({ likeButtonContainer, movie }) {\r\n    this._likeButtonContainer = likeButtonContainer;\r\n    this._movie = movie;\r\n\r\n    await this._renderButton();\r\n  },\r\n\r\n  async _renderButton() {\r\n    const { id } = this._movie;\r\n\r\n    if (await this._isMovieExist(id)) {\r\n      this._renderLiked();\r\n    } else {\r\n      this._renderLike();\r\n    }\r\n  },\r\n\r\n  async _isMovieExist(id) {\r\n    const movie = await FavoriteMovieIdb.getMovie(id);\r\n    return !!movie;\r\n  },\r\n\r\n  _renderLike() {\r\n    this._likeButtonContainer.innerHTML = createLikeButtonTemplate();\r\n\r\n    const likeButton = document.querySelector(\"#likeButton\");\r\n    likeButton.addEventListener(\"click\", async () => {\r\n      Swal.fire({\r\n        title: \"Are you sure you save this movie.?\",\r\n        icon: \"warning\",\r\n        showCancelButton: true,\r\n        confirmButtonColor: \"#3085d6\",\r\n        cancelButtonColor: \"#d33\",\r\n        confirmButtonText: \"Yes, save\",\r\n        cancelButtonText: \"No\",\r\n      }).then(async (result) => {\r\n        if (result.isConfirmed) {\r\n          await FavoriteMovieIdb.putMovie(this._movie);\r\n          this._renderButton();\r\n          Swal.fire(\"success\", \"Successfully added a movie\", \"success\");\r\n        }\r\n      });\r\n    });\r\n  },\r\n\r\n  _renderLiked() {\r\n    this._likeButtonContainer.innerHTML = createLikedButtonTemplate();\r\n\r\n    const likeButton = document.querySelector(\"#likeButton\");\r\n    likeButton.addEventListener(\"click\", async () => {\r\n      Swal.fire({\r\n        title: \"Are you sure you want to delete this movie listing?\",\r\n        icon: \"warning\",\r\n        showCancelButton: true,\r\n        confirmButtonColor: \"#3085d6\",\r\n        cancelButtonColor: \"#d33\",\r\n        confirmButtonText: \"Yes, Delete\",\r\n        cancelButtonText: \"Tidak\",\r\n      }).then(async (result) => {\r\n        if (result.isConfirmed) {\r\n          await FavoriteMovieIdb.deleteMovie(this._movie.id);\r\n          this._renderButton();\r\n          Swal.fire(\"success\", \"Successfully deleted a movie\", \"success\");\r\n        }\r\n      });\r\n    });\r\n  },\r\n};\r\n\r\nexport default LikeButtonInitiator;\r\n","/* eslint-disable no-unused-vars */\nimport * as WorkboxWindow from 'workbox-window';\n\nconst swRegister = async () => {\n  if (!('serviceWorker' in navigator)) {\n    console.log('Service Worker not supported in the browser');\n  }\n\n  const wb = new WorkboxWindow.Workbox('./sw.bundle.js');\n\n  try {\n    await wb.register();\n  } catch (error) {\n    console.log('Failed to register service worker', error);\n  }\n};\n\nexport default swRegister;\n","const NotificationHelper = {\n  sendNotification({ title, options }) {\n    if (!this._checkAvailability()) {\n      console.log('Notification not supported in this browser');\n      return;\n    }\n\n    if (!this._checkPermission()) {\n      console.log('User did not yet granted permission');\n      this._requestPermission();\n      return;\n    }\n\n    this._showNotification({ title, options });\n  },\n\n  _checkAvailability() {\n    return 'Notification' in window;\n  },\n\n  _checkPermission() {\n    return Notification.permission === 'granted';\n  },\n\n  async _requestPermission() {\n    const status = await Notification.requestPermission();\n\n    if (status === 'denied') {\n      console.log('Notification Denied');\n    }\n\n    if (status === 'default') {\n      console.log('Permission closed');\n    }\n  },\n\n  async _showNotification({ title, options }) {\n    const serviceWorkerRegistration = await navigator.serviceWorker.ready;\n    serviceWorkerRegistration.showNotification(title, options);\n  },\n};\n\nexport default NotificationHelper;\n","import NotificationHelper from './notification-helper';\nimport CONFIG from '../globals/config';\n\nconst WebSocketInitiator = {\n  init(url) {\n    const webSocket = new WebSocket(url);\n    webSocket.onmessage = this._onMessageHandler;\n  },\n\n  _onMessageHandler(message) {\n    const movie = JSON.parse(message.data);\n\n    NotificationHelper.sendNotification({\n      title: `${movie.title} is on cinema!`,\n      options: {\n        body: movie.overview,\n        image: `${CONFIG.BASE_IMAGE_URL + movie.poster_path}`,\n      },\n    });\n  },\n};\n\nexport default WebSocketInitiator;\n"],"names":["NowPlaying","Upcoming","Detail","Like","Homepage","List","Trending","Populer","Latest","routes","UrlParser","parseActiveUrlWithCombiner","url","window","location","hash","slice","toLowerCase","splitedUrl","_urlSplitter","_urlCombiner","parseActiveUrlWithoutCombiner","urlsSplits","split","resource","id","verb","DrawerInitiator","init","button","drawer","content","addEventListener","event","_toggleDrawer","_closeDrawer","stopPropagation","classList","toggle","remove","FavoriteMovieIdb","createLikeButtonTemplate","createLikedButtonTemplate","LikeButtonInitiator","likeButtonContainer","movie","_likeButtonContainer","_movie","_renderButton","_isMovieExist","_renderLiked","_renderLike","getMovie","innerHTML","likeButton","document","querySelector","Swal","fire","title","icon","showCancelButton","confirmButtonColor","cancelButtonColor","confirmButtonText","cancelButtonText","then","result","isConfirmed","putMovie","deleteMovie","WorkboxWindow","swRegister","navigator","console","log","wb","Workbox","register","NotificationHelper","sendNotification","options","_checkAvailability","_checkPermission","_requestPermission","_showNotification","Notification","permission","requestPermission","status","serviceWorker","ready","serviceWorkerRegistration","showNotification","CONFIG","WebSocketInitiator","webSocket","WebSocket","onmessage","_onMessageHandler","message","JSON","parse","data","body","overview","image","BASE_IMAGE_URL","poster_path"],"sourceRoot":""}